<!doctype html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script>
			/*
			 	Given two strings s1 and s2, return true if s2 contains a permutation of s1, or false otherwise.

        In other words, return true if one of s1's permutations is the substring of s2.
			 */
			$(document).ready(function(){
        
				/*
        * @param s1: a string
        * @param s2: a string
        * @return: true if one of s1's permutations is the substring of s2
        */
        let checkInclusion = function(s1, s2) {
            if (s1.length > s2.length) return false;

            const s1Map = new Map();
            const windowMap = new Map();

            // Build frequency map for s1
            for (const c of s1) {
                s1Map.set(c, (s1Map.get(c) || 0) + 1);
            }

            let left = 0, right = 0;

            while (right < s2.length) {
                const curr = s2[right];
                windowMap.set(curr, (windowMap.get(curr) || 0) + 1);
                right++;

                if (right - left > s1.length) {
                    const leftChar = s2[left];
                    windowMap.set(leftChar, windowMap.get(leftChar) - 1);
                    if (windowMap.get(leftChar) === 0) {
                        windowMap.delete(leftChar);
                    }
                    left++;
                }

                if (mapsAreEqual(s1Map, windowMap)) return true;
            }

            return false;
        };

        // Helper to compare two Maps
        function mapsAreEqual(map1, map2) {
            if (map1.size !== map2.size) return false;
            for (const [key, val] of map1) {
                if (map2.get(key) !== val) return false;
            }
            return true;
        }

        const input = "ab", s2 = "eidbaooo";
        let results = checkInclusion(input, s2);
				$('#t1').html('<h2>Input: ' + JSON.stringify(input, null, 2) + '<br>Results: ' + JSON.stringify(results, null, 2) + '</h2>');
			});

			/*sol:
				HashMap
			 */

		</script>
	</head>
	
	<body>
		<div>
			<p id='t1'></p>
		</div>
	</body>

</html>